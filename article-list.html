<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="render" content="webkit|ie-comp|ie-stand">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
	<meta http-equiv="Cache-Control" content="no-siteapp" />
	<link rel="Bookmark" href="./images/favicon.ico">
	<link rel="Shortcut Icon" href="./images/favicon.ico" type="image/x-icon">
	<!--[if lt IE 9]
	<script type="text/javascript" src="lib/html5.js"></script>
	<script type="text/javascript" src="lib/respond.min.js"></script>
	<script type="text/javascript" src="lib/PIE-2.0beta1/PIE_IE678.js"></script>
	<![endif]-->
	<link rel="stylesheet" href="css/H-ui.min.css" type="text/css">
	<link rel="stylesheet" href="css/H-ui.admin.css" type="text/css">
	<link rel="stylesheet" href="lib/Hui-iconfont/1.0.7/iconfont.css" type="text/css">
	<!--[if IE 6]
	<script type="text/javascript" src="http://lib.h-ui.net/DD_belatedPNG_0.0.8a-min.js"></script>
	<script>DD_belatedPNG.fix('.pngfix,.icon');</script>
	<![endif]-->
	<title>资讯列表</title>
</head>
<body>
	<nav class="breadcrumb">
		<i class="Hui-iconfont">&#xe625;</i>
		首页
		<i class="Hui-iconfont">&#xe6d7;</i>
		资讯管理
		<i class="Hui-iconfont">&#xe6d7;</i>
		资讯列表
		<a href="javascript:location.replace(location.href)" class="btn btn-success radius r mr-20 mt-5" title="刷新">
			<i class="Hui-iconfont">&#xe68f;</i>
		</a>
	</nav>
	<div class="text-c mt-20">
		<span class="select-box inline">
		  	<select class="select" size="1" name="">
		   		<option value="1" selected>全部分类</option>
		    	<option value="2">菜单二</option>
		    	<option value="3">菜单三</option>
		  	</select>
		</span>
		日期范围：<input type="text" onfocus="WdatePicker({maxDate:'#F{$dp.$D(\'logmax\')||\'%y-%M-%d\'}'})" id="logmin" class="input-text Wdate" style="width:120px;">
		-
		<input type="text" onfocus="WdatePicker({minDate:'#F{$dp.$D(\'logmin\')}',maxDate:'%y-%M-%d'})" id="logmax" class="input-text Wdate" style="width:120px;">
		<input type="text" class="input-text" placeholder="资讯名称" style="width:250px">
		<button class="btn btn-success radius">
			<i class="Hui-iconfont">&#xe665;</i>
			搜资讯
		</button>
	</div>
	<div class="cl pd-5 bg-1 bk-gray mt-20 mr-20 ml-20">
		<span class="l">
			<a href="javascript:;" class="btn btn-danger radius" onclick="datadel()">
				<i class="Hui-iconfont">&#xe6e2;</i>
				批量删除
			</a>			
			<a href="javascript:;" class="btn btn-primary radius"  _href="article-add.html" onclick="article_add('资讯添加','article-add.html')">
				<i class="Hui-iconfont">&#xe600;</i>
				添加资讯
			</a>
		</span>
		<span class="r">
			共有数据：<strong>54</strong>条
		</span>
	</div>
	
	<div class="mt-20 mr-20 ml-20">
		<table class="table table-border table-bordered table-hover table-bg table-sort">
			<thead class="text-c">
				<tr>
					<th>
						<input type="checkbox">
					</th>
					<th>ID</th>
					<th>标题</th>
					<th>分类</th>
					<th>来源</th>
					<th>更新时间</th>
					<th>浏览次数</th>
					<th>发布状态</th>
					<th>操作</th>
				</tr>
			</thead>
			<tbody class="text-c">
				<tr>
					<td>
						<input type="checkbox">
					</td>
					<td>10002</td>
					<td class="text-l">
						<a href="javascript:;" style="text-decoration:underline" title="查看">资讯标题</a>
					</td>
					<td>行业动态</td>
					<td>H-ui</td>
					<td>2014-6-11 11:1:42</td>
					<td>1245</td>
					<td class="td-status">
						<span class="label label-success radius">草稿</span>
					</td>
					<td class="td-manage">
						<a href="javascript:;" title="审核" style="text-decoration:none" onclick="article_shenhe(this,'10001')">
							审核
						</a>
						<a href="javascript:;" title="编辑" style="text-decoration:none" onclick="article_edit('资讯编辑','article-add.html','10001')">
							<i class="Hui-iconfont">&#xe6df;</i>
						</a>
						<a href="javascript:;" title="删除" style="text-decoration:none" onclick="article_del(this,'10001')">
							<i class="Hui-iconfont">&#xe6e2;</i>
						</a>
					</td>
				</tr>
				<tr>
					<td>
						<input type="checkbox">
					</td>
					<td>10001</td>
					<td class="text-l">
						<a href="javascript:;" style="text-decoration:underline" title="查看">资讯标题</a>
					</td>
					<td>行业动态</td>
					<td>H-ui</td>
					<td>2015-6-22 15:55:4</td>
					<td>4548</td>
					<td class="td-status">
						<span class="label label-success">已发布</span>
					</td>
					<td class="td-manage">
						<a href="javascript:;" title="下架" style="text-decoration:none" onclick="article_stop(this,'10001')">
							<i class="Hui-iconfont">&#xe6de;</i>
						</a>
						<a href="javascript:;" title="编辑" style="text-decoration:none" onclick="article_edit('资讯编辑','article-add.html','10001')">
							<i class="Hui-iconfont">&#xe6df;</i></a>
						<a href="javascript:;" title="删除" style="text-decoration:none" onclick="article_del(this,'10001')">
							<i class="Hui-iconfont">&#xe6e2;</i>
						</a>
					</td>
				</tr>
			</tbody>
		</table>
	</div>
	
	<script type="text/javascript" src="lib/jquery/1.9.1/jquery.min.js"></script>
	<script type="text/javascript" src="lib/Validform/5.3.2/Validform.min.js"></script>
	<script type="text/javascript" src="lib/layer/2.1/layer.js"></script>
	<script type="text/javascript" src="lib/My97DatePicker/WdatePicker.js"></script> 
	<script type="text/javascript" src="lib/datatables/1.10.0/jquery.dataTables.min.js"></script> 
	<script type="text/javascript" src="js/H-ui.js"></script>
	<script type="text/javascript" src="js/H-ui.admin.js"></script>
	<script>
		$('.table-sort').dataTable({
			"aaSorting": [[ 1, "desc" ]],//默认第几个排序
			"bStateSave": true,//状态保存
			"aoColumnDefs": [
			  //{"bVisible": false, "aTargets": [ 3 ]} //控制列的隐藏显示
			  {"orderable":false,"aTargets":[0,8]}// 制定列不参与排序
			]
		});
		
		/*资讯添加*/
		function article_add(title,url){
			var index=layer.open({
				type:2,
				title:title,
				content:url
			});
			layer.full(index);
		}
		/*资讯-编辑*/
		function article_edit(title,url,id,w,h){
			var index = layer.open({
				type: 2,
				title: title,
				content: url
			});
			layer.full(index);
		}
		/*资讯审核*/
		function article_shenhe(obj,id){
			layer.confirm('审核文章？',{
				btn:['通过','不通过'],
				shade:false
			},function(){//审核通过才可以发布，状态显示“已通过审核”
				$(obj).parents("tr").find(".td-manage").prepend("<a href='javascript:;' title='发布' onclick='article_start(this,id)' class='c-primary'>发布</a>");	
				$(obj).parents("tr").find(".td-status").html("<span class='label label-success radius'>已通过审核</span>");
				$(obj).remove();//把自己移走
				layer.msg('已发布',{icon:6,time:1000});
			},function(){//审核未通过需要申请上线，状态显示“未通过”
				$(obj).parents("tr").find(".td-manage").prepend("<a href='javascript:;' title='申请上线' onclick='article_shenqing(this,id)' class='c-primary'>申请上线</a>");
				$(obj).parents("tr").find(".td-status").html("<span class='label label-default radius'>未通过</span>");
				$(obj).remove();
				layer.msg('未通过',{icon:5,time:1000});
			})
		}
		/*资讯删除*/
		function article_del(obj,id){
			layer.confirm('删除文章？',function(index){
				$(obj).parent("tr").remove();
				layer.msg("已删除！");				
			})
		}
		/*资讯下架*/
		function article_stop(obj,id){
			layer.confirm('确认要下架吗？',function(index){
				$(obj).parents("tr").find(".td-manage").prepend("<a href='javascript:;' title='发布' onclick='article_start(this,id)' class='c-primary'><i class='Hui-iconfont'>&#xe603;</i></a>");	
				$(obj).parents("tr").find(".td-status").html("<span class='label label-default radius'>已下架</span>");
				$(obj).remove();
				layer.msg("已下架",{icon:5,time:1000});				
			})
		}
		/*资讯发布*/
		function article_start(obj,id){
			layer.confirm('确认要发布吗？',function(index){//发布成功了就有执行“下架”的能力，发布完成显示此刻状态为“已发布”
				$(obj).parents("tr").find(".td-manage").prepend("<a href='javascript:;' title='下架' style='text-decoration:none' onclick='article_stop(this,id)'><i class='Hui-iconfont'>&#xe6de;</i></a>");	
				$(obj).parents("tr").find(".td-status").html("<span class='label label-success radius'>已发布</span>");
				$(obj).remove();
				layer.msg("已发布",{icon:6,time:1000});
			})
		}
		/*资讯申请上线*/
		function article_shenqing(obj,id){
			$(obj).parents("tr").find(".td-manage").html("");
			$(obj).parents("tr").find(".td-status").html("<span class='label label-default radius'>待审核</span>");
			layer.msg("已提交申请，耐心等待审核！",{icon:1,time:2000});
		}
	</script>
</body>
</html>